<!DOCTYPE html>
<html layout:decorate="~{layout/layout}"
      th:lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<head layout:fragment="head" title="ν¬μΈνΈ νμ¤ν† λ¦¬">
  <link rel="stylesheet" th:href="@{/css/main.css}" />
  <link rel="stylesheet" th:href="@{/css/page/_point_history.css}" />
  <link rel="stylesheet" th:href="@{/css/component/_pagination.css}" />
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>

<body>
<main layout:fragment="content">
  <section class="main-content">

    <div class="point-header">
      <h1>π“ ν¬μΈνΈ νμ¤ν† λ¦¬</h1>
      <div class="current-point"
           th:text="${'<' + #numbers.formatDecimal(currentPoint, 1, 'COMMA', 0, 'POINT').replaceFirst('\\.00$', '') + ' P>'}"></div>
    </div>
    <!-- νƒ­ λ²„νΌ -->
    <div class="point-tabs">
      <button class="point-tab active" onclick="filterType('ALL')">μ „μ²΄</button>
      <button class="point-tab" onclick="filterType('EARN')">μ λ¦½</button>
      <button class="point-tab" onclick="filterType('USE')">μ°¨κ°</button>
    </div>

    <!-- ν¬μΈνΈ νμ¤ν† λ¦¬ ν…μ΄λΈ” -->
    <table id="pointHistoryTable">
      <thead>
      <tr>
        <th>μΌμ‹</th>
        <th>μ ν•</th>
        <th>μ‚¬μ </th>
        <th>κΈμ•΅</th>
        <th>μ”μ•΅</th>
      </tr>
      </thead>
      <tbody>
      <tr th:each="history : ${pointHistoryList}"
          th:classappend="${history.type.name()} == 'EARN' ? 'μ λ¦½' : 'μ°¨κ°'"
          th:data-type="${history.type.name()}">
        <td th:text="${#temporals.format(history.createdAt, 'yyyy-MM-dd HH:mm')}"></td>
        <td th:text="${history.type}"></td>
        <td th:text="${history.reason}"></td>
        <td th:text="${#numbers.formatDecimal(history.amount, 1, 'COMMA', 0, 'POINT').replaceFirst('\\.00$', '') + ' P'}"></td>
        <td th:text="${#numbers.formatDecimal(history.balance, 1, 'COMMA', 0, 'POINT').replaceFirst('\\.00$', '') + ' P'}"></td>
      </tr>
      </tbody>
    </table>
  </section>
</main>
<th:block layout:fragment="scripts">
  <script th:src="@{/js/mypage/mypage.js}"></script>
</th:block>
</body>
</html>